# CAAS Fresh E2E Report

- Generated: 2026-02-27T16:56:04.349Z
- Total: 75
- Passed: 73
- Warnings: 0
- Failed: 2

## Phase Breakdown

| Phase | Total | Passed | Warnings | Failed |
|---|---:|---:|---:|---:|
| 01-health-and-basics | 10 | 10 | 0 | 0 |
| 02-cors-and-registration | 18 | 17 | 0 | 1 |
| 03-project-lifecycle-and-scope | 12 | 12 | 0 | 0 |
| 04-sdk-http-contract | 12 | 12 | 0 | 0 |
| 05-socket-e2e | 17 | 17 | 0 | 0 |
| 06-admin-ui-gateway-flow | 6 | 5 | 0 | 1 |

## Failed Cases

### 1. Admin proxy refresh with cookie
```json
{
  "method": "POST",
  "url": "http://admin-portal:3100/api/auth/refresh",
  "status": 403,
  "headers": {
    "connection": "keep-alive",
    "content-type": "application/json",
    "date": "Fri, 27 Feb 2026 16:56:05 GMT",
    "keep-alive": "timeout=5",
    "referrer-policy": "strict-origin-when-cross-origin",
    "transfer-encoding": "chunked",
    "vary": "RSC, Next-Router-State-Tree, Next-Router-Prefetch",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  },
  "response": {
    "error": "CSRF validation failed",
    "code": "csrf_failed"
  },
  "requestBody": null
}
```

### 2. Admin api auth logout
```json
{
  "method": "POST",
  "url": "http://admin-portal:3100/api/auth/logout",
  "status": 403,
  "headers": {
    "connection": "keep-alive",
    "content-type": "application/json",
    "date": "Fri, 27 Feb 2026 16:56:06 GMT",
    "keep-alive": "timeout=5",
    "referrer-policy": "strict-origin-when-cross-origin",
    "transfer-encoding": "chunked",
    "vary": "RSC, Next-Router-State-Tree, Next-Router-Prefetch",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  },
  "response": {
    "error": "CSRF validation failed",
    "code": "csrf_failed"
  },
  "requestBody": {}
}
```


## All Cases

1. [PASSED] 01-health-and-basics :: Gateway /health
2. [PASSED] 01-health-and-basics :: Gateway /internal/health
3. [PASSED] 01-health-and-basics :: Auth /health
4. [PASSED] 01-health-and-basics :: Compliance /health
5. [PASSED] 01-health-and-basics :: Crypto /health
6. [PASSED] 01-health-and-basics :: Search /health
7. [PASSED] 01-health-and-basics :: Media /health
8. [PASSED] 01-health-and-basics :: Socket1 /health
9. [PASSED] 01-health-and-basics :: Socket2 /health
10. [PASSED] 01-health-and-basics :: Admin Portal /api/health
11. [PASSED] 02-cors-and-registration :: Gateway preflight register with custom headers
12. [PASSED] 02-cors-and-registration :: CORS allow header includes content-type
13. [PASSED] 02-cors-and-registration :: CORS allow header includes authorization
14. [PASSED] 02-cors-and-registration :: CORS allow header includes x-correlation-id
15. [PASSED] 02-cors-and-registration :: CORS allow header includes idempotency-key
16. [PASSED] 02-cors-and-registration :: CORS allow header includes x-timestamp
17. [PASSED] 02-cors-and-registration :: CORS allow header includes x-nonce
18. [PASSED] 02-cors-and-registration :: CORS allow header includes x-project-id
19. [PASSED] 02-cors-and-registration :: Admin proxy register
20. [PASSED] 02-cors-and-registration :: Admin proxy register duplicate email
21. [PASSED] 02-cors-and-registration :: Gateway register negative matrix :: missing fields
22. [PASSED] 02-cors-and-registration :: Gateway register negative matrix :: invalid email
23. [PASSED] 02-cors-and-registration :: Gateway register negative matrix :: short password
24. [PASSED] 02-cors-and-registration :: Gateway register negative matrix :: invalid project environment
25. [PASSED] 02-cors-and-registration :: Gateway client login
26. [PASSED] 02-cors-and-registration :: Admin proxy login
27. [FAILED] 02-cors-and-registration :: Admin proxy refresh with cookie
28. [PASSED] 02-cors-and-registration :: Gateway refresh token
29. [PASSED] 03-project-lifecycle-and-scope :: List projects initial
30. [PASSED] 03-project-lifecycle-and-scope :: Create secondary project
31. [PASSED] 03-project-lifecycle-and-scope :: Update project metadata
32. [PASSED] 03-project-lifecycle-and-scope :: Select updated project as active
33. [PASSED] 03-project-lifecycle-and-scope :: Update project client spoof attempt rejected
34. [PASSED] 03-project-lifecycle-and-scope :: Archive selected project
35. [PASSED] 03-project-lifecycle-and-scope :: List projects after archive
36. [PASSED] 03-project-lifecycle-and-scope :: Archive last active project rejected
37. [PASSED] 03-project-lifecycle-and-scope :: Project select spoofed client_id rejected
38. [PASSED] 03-project-lifecycle-and-scope :: Project create spoofed client_id rejected
39. [PASSED] 03-project-lifecycle-and-scope :: Project list still available
40. [PASSED] 03-project-lifecycle-and-scope :: Project list count check
41. [PASSED] 04-sdk-http-contract :: SDK health endpoint
42. [PASSED] 04-sdk-http-contract :: SDK capabilities with API key
43. [PASSED] 04-sdk-http-contract :: SDK session create valid
44. [PASSED] 04-sdk-http-contract :: SDK session create with auth fallback project context
45. [PASSED] 04-sdk-http-contract :: SDK fallback project context header present
46. [PASSED] 04-sdk-http-contract :: SDK session replay nonce rejected
47. [PASSED] 04-sdk-http-contract :: SDK session project mismatch rejected
48. [PASSED] 04-sdk-http-contract :: SDK session tenant_id spoof rejected
49. [PASSED] 04-sdk-http-contract :: SDK session client_id spoof rejected
50. [PASSED] 04-sdk-http-contract :: SDK refresh/logout matrix :: refresh invalid token
51. [PASSED] 04-sdk-http-contract :: SDK refresh/logout matrix :: refresh valid token
52. [PASSED] 04-sdk-http-contract :: SDK logout missing bearer
53. [PASSED] 05-socket-e2e :: Socket /chat rejects missing token
54. [PASSED] 05-socket-e2e :: Socket /chat authenticated connect
55. [PASSED] 05-socket-e2e :: Socket chat joinRoom invalid
56. [PASSED] 05-socket-e2e :: Socket chat joinRoom valid-shape
57. [PASSED] 05-socket-e2e :: Socket chat sendMessage invalid
58. [PASSED] 05-socket-e2e :: Socket chat sendMessage valid-shape
59. [PASSED] 05-socket-e2e :: Socket chat typing_query
60. [PASSED] 05-socket-e2e :: Socket chat message_read invalid
61. [PASSED] 05-socket-e2e :: Socket chat message_delivered invalid
62. [PASSED] 05-socket-e2e :: Socket chat leaveRoom valid-shape
63. [PASSED] 05-socket-e2e :: Socket /presence authenticated connect
64. [PASSED] 05-socket-e2e :: Socket presence_subscribe ack
65. [PASSED] 05-socket-e2e :: Socket presence_unsubscribe ack
66. [PASSED] 05-socket-e2e :: Socket /webrtc authenticated connect
67. [PASSED] 05-socket-e2e :: Socket webrtc call:initiate ack
68. [PASSED] 05-socket-e2e :: Socket webrtc ice-candidate invalid ack
69. [PASSED] 05-socket-e2e :: SDK logout with bearer
70. [PASSED] 06-admin-ui-gateway-flow :: Admin dashboard without auth redirect
71. [FAILED] 06-admin-ui-gateway-flow :: Admin api auth logout
72. [PASSED] 06-admin-ui-gateway-flow :: Gateway tenant with missing bearer
73. [PASSED] 06-admin-ui-gateway-flow :: Gateway tenant with bearer
74. [PASSED] 06-admin-ui-gateway-flow :: Gateway project preflight matrix :: allowed origin with custom headers
75. [PASSED] 06-admin-ui-gateway-flow :: Gateway project preflight matrix :: disallowed origin